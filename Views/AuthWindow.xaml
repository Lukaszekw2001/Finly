<Window x:Class="Finly.Views.AuthWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Logowanie / Rejestracja"
        ResizeMode="CanResize"
        KeyDown="Window_KeyDown"
        Loaded="Window_Loaded">

    <Grid Margin="16">

        <!-- ================== PANEL LOGOWANIA ================== -->
        <StackPanel x:Name="LoginPanel"
                    Visibility="{Binding IsLoginMode, Converter={StaticResource BoolToVisibility}}"
                    VerticalAlignment="Center">

            <TextBlock Text="{Binding LoginBanner}"
                       Foreground="{Binding LoginBannerBrush}"
                       TextAlignment="Center"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,8"/>

            <TextBlock Text="Login:"/>
            <TextBox x:Name="LoginUsername"
                     Margin="0,0,0,8"
                     Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"/>

            <TextBlock Text="Hasło:"/>
            <Grid>
                <PasswordBox x:Name="PwdLogin"/>
                <TextBox     x:Name="PwdLoginText" Visibility="Collapsed"/>
            </Grid>

            <CheckBox Content="Pokaż hasło"
                      Margin="0,2,0,8"
                      Checked="LoginShowPassword_Checked"
                      Unchecked="LoginShowPassword_Unchecked"/>

            <Button Content="Zaloguj" Height="34" Click="LoginButton_Click"/>

            <Separator Margin="0,14,0,8"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock Text="Nie masz jeszcze konta?" Margin="0,0,8,0"/>
                <Button Content="Zarejestruj się" Click="SwitchToRegister_Click"/>
            </StackPanel>
        </StackPanel>

        <!-- ================== PANEL REJESTRACJI ================== -->
        <StackPanel x:Name="RegisterPanel"
                    Visibility="{Binding IsRegisterMode, Converter={StaticResource BoolToVisibility}}"
                    VerticalAlignment="Center">

            <TextBlock Text="Login:"/>
            <TextBox x:Name="RegUsername"
                     Margin="0,0,0,8"
                     Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"/>

            <TextBlock Text="Hasło:"/>
            <Grid>
                <PasswordBox x:Name="PwdReg"          PasswordChanged="PwdReg_PasswordChanged"/>
                <TextBox     x:Name="PwdRegText"      Visibility="Collapsed" TextChanged="PwdRegText_TextChanged"/>
            </Grid>

            <TextBlock Text="Powtórz hasło:"/>
            <Grid>
                <PasswordBox x:Name="PwdRegConfirm"     PasswordChanged="PwdRegConfirm_PasswordChanged"/>
                <TextBox     x:Name="PwdRegConfirmText" Visibility="Collapsed" TextChanged="PwdRegConfirmText_TextChanged"/>
            </Grid>

            <CheckBox Content="Pokaż hasło"
                      Margin="0,2,0,8"
                      Checked="RegShowPassword_Checked"
                      Unchecked="RegShowPassword_Unchecked"/>

            <!-- CHECKLISTA wymagań hasła -->
            <StackPanel Margin="0,0,0,6">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="{Binding IsOk, Converter={StaticResource BoolToBrush}}"
                               Text="{Binding IsOk, Converter={StaticResource BoolToSymbol}}"
                               FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock Text="co najmniej 8 znaków"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="{Binding IsOk, Converter={StaticResource BoolToBrush}}"
                               Text="{Binding IsOk, Converter={StaticResource BoolToSymbol}}"
                               FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock Text="mała litera"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="{Binding IsOk, Converter={StaticResource BoolToBrush}}"
                               Text="{Binding IsOk, Converter={StaticResource BoolToSymbol}}"
                               FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock Text="wielka litera"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="{Binding IsOk, Converter={StaticResource BoolToBrush}}"
                               Text="{Binding IsOk, Converter={StaticResource BoolToSymbol}}"
                               FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock Text="cyfra"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="{Binding IsOk, Converter={StaticResource BoolToBrush}}"
                               Text="{Binding IsOk, Converter={StaticResource BoolToSymbol}}"
                               FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock Text="znak specjalny (np. !@#$%)"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="{Binding IsOk, Converter={StaticResource BoolToBrush}}"
                               Text="{Binding IsOk, Converter={StaticResource BoolToSymbol}}"
                               FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock Text="bez spacji"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="{Binding IsOk, Converter={StaticResource BoolToBrush}}"
                               Text="{Binding IsOk, Converter={StaticResource BoolToSymbol}}"
                               FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock Text="powtórzone hasło takie samo"/>
                </StackPanel>
            </StackPanel>

            <TextBlock Text="{Binding RegisterMessage}"
                       Foreground="{Binding RegisterMessageBrush}"
                       Margin="0,6,0,2"
                       HorizontalAlignment="Center"
                       TextAlignment="Center"/>

            <Button Content="Utwórz konto"
                    Height="34"
                    Click="RegisterButton_Click"
                    IsEnabled="{Binding CanRegister}"/>

            <Separator Margin="0,14,0,8"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock Text="Masz już konto?" Margin="0,0,8,0"/>
                <Button Content="Wróć do logowania" Click="SwitchToLogin_Click"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>
