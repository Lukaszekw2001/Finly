<Window x:Class="Finly.Shell.ShellWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        Title="Finly" WindowStyle="None" WindowState="Maximized"
        Background="{DynamicResource App.Background}">
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="48"
                        ResizeBorderThickness="6"
                        CornerRadius="0"
                        UseAeroCaptionButtons="False"/>
    </shell:WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>
            <!-- pasek tytułu = 48 -->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Pasek tytułu -->
        <Grid Grid.Row="0" Background="{DynamicResource TitleBar.Background}"
          MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Logo + nazwa -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="12,0,0,0">
                <Ellipse Width="15" Height="15" Fill="{DynamicResource Brand.Orange}"/>
                <TextBlock Text="  Finly" Foreground="{DynamicResource App.Foreground}" FontWeight="SemiBold"/>
            </StackPanel>

            <!-- Przyciski okna -->
            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <Button Width="32" Height="32" Background="Transparent" BorderBrush="{x:Null}"
                Click="Minimize_Click" shell:WindowChrome.IsHitTestVisibleInChrome="True">
                    <TextBlock Text="—" Foreground="{DynamicResource App.Foreground}" FontSize="16"
                     HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Button>
                <Button Width="32" Height="32" Background="Transparent" BorderBrush="{x:Null}"
                Click="MaxRestore_Click" shell:WindowChrome.IsHitTestVisibleInChrome="True">
                    <TextBlock Text="□" Foreground="{DynamicResource App.Foreground}" FontSize="14"
                     HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Button>
                <Button Width="32" Height="32" Background="Transparent" BorderBrush="{x:Null}"
                Click="Close_Click" shell:WindowChrome.IsHitTestVisibleInChrome="True">
                    <TextBlock Text="✕" Foreground="{DynamicResource App.Foreground}" FontSize="14"
                     HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Button>
            </StackPanel>
        </Grid>

        <!-- Główna siatka: sidebar | separator | content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240"/>
                <ColumnDefinition Width="2"/>
                <!-- separator -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- SIDEBAR -->
            <Border Grid.Column="0" Background="{DynamicResource Sidebar.Background}">
                <DockPanel LastChildFill="True">
                    <!-- Góra: logo i nazwa -->
                    <StackPanel DockPanel.Dock="Top" Margin="16,16,16,8">
                        <Ellipse Width="48" Height="48" Fill="{DynamicResource Brand.Orange}"/>
                        <TextBlock Text="Finly" Margin="0,8,0,0" FontSize="18" FontWeight="Bold"
                       Foreground="{DynamicResource Sidebar.Foreground}"/>
                        <Separator Margin="0,12,0,8" Background="{DynamicResource Surface.Border}"/>
                    </StackPanel>

                    <!-- Środek: nawigacja -->
                    <StackPanel Margin="8,0,8,8" x:Name="NavContainer">
                        <!-- Uwaga: NavButton/PrimaryButton powinny być w Styles -->
                        <ToggleButton x:Name="NavDashboard" Style="{StaticResource NavButton}"
                          Content="Panel główny" IsChecked="True"
                          Click="Nav_Dashboard_Click"/>
                        <ToggleButton x:Name="NavAdd" Style="{StaticResource NavButton}"
                          Content="Dodaj wydatek" Click="Nav_Add_Click"/>
                        <ToggleButton x:Name="NavCharts" Style="{StaticResource NavButton}"
                          Content="Wykresy" Click="Nav_Charts_Click"/>
                        <ToggleButton x:Name="NavCategories" Style="{StaticResource NavButton}"
                          Content="Kategorie" Click="Nav_Categories_Click"/>
                        <ToggleButton x:Name="NavSettings" Style="{StaticResource NavButton}"
                          Content="Ustawienia" Click="Nav_Settings_Click"/>
                    </StackPanel>

                    <!-- Dół: wyloguj -->
                    <StackPanel DockPanel.Dock="Bottom" Margin="8,8,8,16">
                        <Separator Margin="0,8,0,12" Background="{DynamicResource Surface.Border}"/>
                        <Button Content="Wyloguj" Style="{StaticResource PrimaryButton}"
                    Click="Nav_Logout_Click"/>
                    </StackPanel>
                </DockPanel>
            </Border>

            <!-- Separator (pomarańczowy) -->
            <Border Grid.Column="1" Background="{DynamicResource Separator.Orange}"/>

            <!-- PRAWA STRONA (content) -->
            <Grid Grid.Column="2" Background="{DynamicResource App.Background}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Pasek nad treścią -->
                <Border Grid.Row="0" Background="{DynamicResource Surface.Background}"
                BorderBrush="{DynamicResource Surface.Border}" BorderThickness="0,0,0,1" Padding="16,10">
                    <TextBlock Text="Aplikacja do zarządzania finansami"
                     Foreground="{DynamicResource App.Foreground}" FontWeight="SemiBold"/>
                </Border>

                <!-- Gospodarz zawartości -->
                <ContentControl x:Name="RightHost" Grid.Row="1"/>
            </Grid>
        </Grid>
    </Grid>
</Window>

